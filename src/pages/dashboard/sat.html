<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saturnalia - Event Feedback System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #8B5FBF;
            --primary-dark: #6B46C1;
            --secondary: #FF6B6B;
            --accent: #4ECDC4;
            --light: #F7FAFC;
            --dark: #2D3748;
            --gray: #718096;
            --success: #48BB78;
            --warning: #ED8936;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--light);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: rgba(26, 26, 46, 0.9);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: bold;
            color: white;
        }
        
        .logo i {
            color: var(--accent);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }
        
        nav ul li a {
            text-decoration: none;
            color: var(--light);
            font-weight: 500;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        nav ul li a:hover, nav ul li a.active {
            color: var(--accent);
        }
        
        .hero {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(rgba(26, 26, 46, 0.8), rgba(22, 33, 62, 0.9)), url('https://images.unsplash.com/photo-1533174072545-7a4b6ad7a6c3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            border-radius: 10px;
            margin: 30px 0;
        }
        
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 15px;
            background: linear-gradient(to right, var(--accent), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 30px;
            color: #CBD5E0;
        }
        
        .btn {
            display: inline-block;
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(139, 95, 191, 0.4);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(139, 95, 191, 0.6);
        }
        
        .btn-accent {
            background: linear-gradient(to right, var(--accent), #2BB9B0);
        }
        
        .btn-secondary {
            background: linear-gradient(to right, #718096, #4A5568);
        }
        
        .page {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .active {
            display: block;
        }
        
        .section-title {
            font-size: 2rem;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--accent));
            border-radius: 2px;
        }
        
        .card {
            background: rgba(45, 55, 72, 0.7);
            border-radius: 10px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            padding: 25px;
            margin-bottom: 30px;
            transition: transform 0.3s, box-shadow 0.3s;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.3);
        }
        
        .login-form {
            max-width: 450px;
            margin: 40px auto;
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #CBD5E0;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            background: rgba(26, 32, 44, 0.8);
            border: 1px solid #4A5568;
            border-radius: 8px;
            font-size: 16px;
            color: white;
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .event-card {
            border-left: 5px solid var(--primary);
            position: relative;
            overflow: hidden;
        }
        
        .event-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, transparent 70%);
            opacity: 0.1;
            z-index: 0;
        }
        
        .event-card h3 {
            font-size: 1.4rem;
            margin-bottom: 10px;
            color: var(--accent);
        }
        
        .event-date {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .feedback-form {
            max-width: 700px;
            margin: 0 auto;
        }
        
        .rating {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
        }
        
        .rating-option {
            flex: 1;
            text-align: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: background 0.3s;
        }
        
        .rating-option:hover {
            background: rgba(139, 95, 191, 0.2);
        }
        
        .rating-option input {
            display: none;
        }
        
        .rating-option label {
            cursor: pointer;
            display: block;
            font-size: 1.2rem;
        }
        
        .rating-option input:checked + label {
            color: var(--accent);
            font-weight: bold;
        }
        
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            text-align: center;
            padding: 25px 15px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .stat-card.accent {
            background: linear-gradient(135deg, var(--accent) 0%, #2BB9B0 100%);
        }
        
        .stat-card.warning {
            background: linear-gradient(135deg, var(--warning) 0%, #E56F1E 100%);
        }
        
        .stat-card.success {
            background: linear-gradient(135deg, var(--success) 0%, #38A169 100%);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .chart-container {
            height: 300px;
            margin-bottom: 40px;
            position: relative;
        }
        
        .feedback-list {
            max-height: 500px;
            overflow-y: auto;
        }
        
        .feedback-item {
            border-bottom: 1px solid #4A5568;
            padding: 20px 0;
        }
        
        .feedback-item:last-child {
            border-bottom: none;
        }
        
        .feedback-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .feedback-rating {
            color: var(--accent);
            font-weight: bold;
        }
        
        .sentiment-positive {
            color: var(--success);
        }
        
        .sentiment-negative {
            color: var(--secondary);
        }
        
        .sentiment-neutral {
            color: var(--warning);
        }
        
        .no-data {
            text-align: center;
            padding: 40px;
            color: #A0AEC0;
        }
        
        .footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 50px;
            border-top: 1px solid #4A5568;
            color: #A0AEC0;
        }
        
        .form-section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #4A5568;
        }
        
        .form-section-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--accent);
        }
        
        .mcq-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .mcq-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            transition: background 0.3s;
        }
        
        .mcq-option:hover {
            background: rgba(139, 95, 191, 0.1);
        }
        
        .mcq-option input {
            width: auto;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            nav ul {
                gap: 15px;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .dashboard-stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-star"></i>
                    <span>Saturnalia</span>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" class="active" onclick="showPage('home-page')"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="#" onclick="showPage('login-page')"><i class="fas fa-sign-in-alt"></i> Provide Feedback</a></li>
                        <li><a href="#" onclick="checkAccess('dashboard-page')"><i class="fas fa-chart-bar"></i> View Responses</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Home Page -->
        <div id="home-page" class="page active">
            <div class="hero">
                <h1>Saturnalia Fest 2023</h1>
                <p>Join us for the most exciting cultural fest of the year! Experience music, dance, competitions, and much more.</p>
                <a href="#" class="btn btn-accent" onclick="showPage('login-page')">Provide Feedback</a>
                <a href="#" class="btn btn-secondary" onclick="checkAccess('dashboard-page')">View Responses</a>
            </div>
            
            <div class="card">
                <h2 class="section-title">About Saturnalia</h2>
                <p>Saturnalia is Thapar University's annual cultural festival, bringing together students from all disciplines to celebrate art, culture, and creativity. With over 50 events spanning 3 days, it's the most anticipated event on campus.</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px;">
                    <div style="text-align: center;">
                        <i class="fas fa-users" style="font-size: 2.5rem; color: var(--accent); margin-bottom: 15px;"></i>
                        <h3>5000+ Participants</h3>
                        <p>Students from across the country</p>
                    </div>
                    <div style="text-align: center;">
                        <i class="fas fa-calendar" style="font-size: 2.5rem; color: var(--primary); margin-bottom: 15px;"></i>
                        <h3>3 Days</h3>
                        <p>Of non-stop events and activities</p>
                    </div>
                    <div style="text-align: center;">
                        <i class="fas fa-trophy" style="font-size: 2.5rem; color: var(--secondary); margin-bottom: 15px;"></i>
                        <h3>50+ Events</h3>
                        <p>From music to technical competitions</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Login Page -->
        <div id="login-page" class="page">
            <div class="card login-form">
                <h2 class="section-title">Login with Thapar ID</h2>
                <p style="text-align: center; margin-bottom: 25px; color: #CBD5E0;">Access the feedback system using your Thapar credentials</p>
                <form id="login-form">
                    <div class="form-group">
                        <label for="thapar-email">Thapar Email</label>
                        <input type="email" id="thapar-email" placeholder="username@thapar.edu" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" required>
                    </div>
                    <button type="submit" class="btn" style="width: 100%;">Login</button>
                </form>
                <p style="text-align: center; margin-top: 20px; color: #A0AEC0;">
                    Don't have an account? <a href="#" style="color: var(--accent);">Contact administrator</a>
                </p>
            </div>
        </div>

        <!-- Feedback Form Page -->
        <div id="feedback-page" class="page">
            <div class="card feedback-form">
                <h2 class="section-title">Saturnalia 2023 Feedback Form</h2>
                <p style="text-align: center; margin-bottom: 30px; color: #CBD5E0;">
                    Thank you for attending Saturnalia 2023! Please share your feedback to help us improve future events.
                </p>
                
                <form id="feedback-form">
                    <div class="form-section">
                        <h3 class="form-section-title">Event Rating</h3>
                        <div class="form-group">
                            <label>How would you rate Saturnalia 2023 overall?</label>
                            <div class="rating">
                                <div class="rating-option">
                                    <input type="radio" id="rating-1" name="rating" value="1" required>
                                    <label for="rating-1">1 ★</label>
                                </div>
                                <div class="rating-option">
                                    <input type="radio" id="rating-2" name="rating" value="2">
                                    <label for="rating-2">2 ★★</label>
                                </div>
                                <div class="rating-option">
                                    <input type="radio" id="rating-3" name="rating" value="3">
                                    <label for="rating-3">3 ★★★</label>
                                </div>
                                <div class="rating-option">
                                    <input type="radio" id="rating-4" name="rating" value="4">
                                    <label for="rating-4">4 ★★★★</label>
                                </div>
                                <div class="rating-option">
                                    <input type="radio" id="rating-5" name="rating" value="5">
                                    <label for="rating-5">5 ★★★★★</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3 class="form-section-title">Event Experience</h3>
                        
                        <div class="form-group">
                            <label>Which events did you enjoy the most? (Select all that apply)</label>
                            <div class="mcq-options">
                                <div class="mcq-option">
                                    <input type="checkbox" id="event-music" name="enjoyed-events" value="music">
                                    <label for="event-music">Music Concerts</label>
                                </div>
                                <div class="mcq-option">
                                    <input type="checkbox" id="event-dance" name="enjoyed-events" value="dance">
                                    <label for="event-dance">Dance Performances</label>
                                </div>
                                <div class="mcq-option">
                                    <input type="checkbox" id="event-tech" name="enjoyed-events" value="tech">
                                    <label for="event-tech">Technical Events</label>
                                </div>
                                <div class="mcq-option">
                                    <input type="checkbox" id="event-cultural" name="enjoyed-events" value="cultural">
                                    <label for="event-cultural">Cultural Events</label>
                                </div>
                                <div class="mcq-option">
                                    <input type="checkbox" id="event-food" name="enjoyed-events" value="food">
                                    <label for="event-food">Food Festival</label>
                                </div>
                                <div class="mcq-option">
                                    <input type="checkbox" id="event-sports" name="enjoyed-events" value="sports">
                                    <label for="event-sports">Sports Events</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="enjoyment">What was the highlight of Saturnalia 2023 for you?</label>
                            <textarea id="enjoyment" rows="3" required></textarea>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3 class="form-section-title">Improvement Suggestions</h3>
                        
                        <div class="form-group">
                            <label>What areas need improvement? (Select all that apply)</label>
                            <div class="mcq-options">
                                <div class="mcq-option">
                                    <input type="checkbox" id="improve-organization" name="improvement-areas" value="organization">
                                    <label for="improve-organization">Event Organization</label>
                                </div>
                                <div class="mcq-option">
                                    <input type="checkbox" id="improve-food" name="improvement-areas" value="food">
                                    <label for="improve-food">Food & Beverages</label>
                                </div>
                                <div class="mcq-option">
                                    <input type="checkbox" id="improve-crowd" name="improvement-areas" value="crowd">
                                    <label for="improve-crowd">Crowd Management</label>
                                </div>
                                <div class="mcq-option">
                                    <input type="checkbox" id="improve-venue" name="improvement-areas" value="venue">
                                    <label for="improve-venue">Venue & Facilities</label>
                                </div>
                                <div class="mcq-option">
                                    <input type="checkbox" id="improve-events" name="improvement-areas" value="events">
                                    <label for="improve-events">Event Variety</label>
                                </div>
                                <div class="mcq-option">
                                    <input type="checkbox" id="improve-promotion" name="improvement-areas" value="promotion">
                                    <label for="improve-promotion">Event Promotion</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="improvement">Please share any specific suggestions for improvement:</label>
                            <textarea id="improvement" rows="3" required></textarea>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3 class="form-section-title">Future Participation</h3>
                        
                        <div class="form-group">
                            <label for="likelihood">How likely are you to attend Saturnalia next year?</label>
                            <select id="likelihood" required>
                                <option value="">Select an option</option>
                                <option value="very-likely">Very Likely</option>
                                <option value="likely">Likely</option>
                                <option value="neutral">Neutral</option>
                                <option value="unlikely">Unlikely</option>
                                <option value="very-unlikely">Very Unlikely</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Would you recommend Saturnalia to other students?</label>
                            <div class="mcq-options">
                                <div class="mcq-option">
                                    <input type="radio" id="recommend-yes" name="recommend" value="yes" required>
                                    <label for="recommend-yes">Yes, definitely</label>
                                </div>
                                <div class="mcq-option">
                                    <input type="radio" id="recommend-maybe" name="recommend" value="maybe">
                                    <label for="recommend-maybe">Maybe</label>
                                </div>
                                <div class="mcq-option">
                                    <input type="radio" id="recommend-no" name="recommend" value="no">
                                    <label for="recommend-no">No</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn" style="width: 100%; margin-top: 20px;">Submit Feedback</button>
                    <button type="button" class="btn btn-secondary" onclick="showPage('home-page')" style="width: 100%; margin-top: 10px;">Back to Home</button>
                </form>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page">
            <h2 class="section-title">Feedback Responses</h2>
            <p style="text-align: center; margin-bottom: 30px; max-width: 800px; margin-left: auto; margin-right: auto;">
                View insights and analytics from Saturnalia 2023 feedback. Accessible to all Thapar ID users.
            </p>
            
            <div class="dashboard-stats" id="stats-container">
                <!-- Stats will be loaded here -->
            </div>
            
            <div class="card">
                <h3>Rating Distribution</h3>
                <div class="chart-container">
                    <canvas id="ratings-chart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h3>Sentiment Analysis</h3>
                <div class="chart-container">
                    <canvas id="sentiment-chart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h3>Attendance Likelihood</h3>
                <div class="chart-container">
                    <canvas id="likelihood-chart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h3>Recent Feedback</h3>
                <div class="feedback-list" id="recent-feedback">
                    <!-- Feedback items will be loaded here -->
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-secondary" onclick="showPage('home-page')">Back to Home</button>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>Saturnalia Fest 2023 | Thapar Institute of Engineering and Technology</p>
            <p>Feedback System v2.0 | Only accessible with Thapar credentials</p>
        </div>
    </footer>

    <script>
        // Sample data - in a real app, this would come from a backend
        let feedbackData = [
            { rating: 5, enjoyment: "The music concerts were amazing! Especially the EDM night.", improvement: "Better food options would be great", likelihood: "very-likely", sentiment: "positive", date: "2023-11-11", user: "student1@thapar.edu", recommend: "yes" },
            { rating: 4, enjoyment: "Loved the dance competitions and cultural events", improvement: "More seating arrangements needed", likelihood: "likely", sentiment: "positive", date: "2023-11-11", user: "student2@thapar.edu", recommend: "yes" },
            { rating: 3, enjoyment: "Good variety of events", improvement: "Event scheduling could be better", likelihood: "neutral", sentiment: "neutral", date: "2023-11-11", user: "student3@thapar.edu", recommend: "maybe" },
            { rating: 5, enjoyment: "The technical events were very engaging and well-organized", improvement: "Communication about venue changes", likelihood: "very-likely", sentiment: "positive", date: "2023-11-12", user: "student4@thapar.edu", recommend: "yes" },
            { rating: 2, enjoyment: "Some good performances", improvement: "Poor crowd management and long queues", likelihood: "unlikely", sentiment: "negative", date: "2023-11-12", user: "student5@thapar.edu", recommend: "no" },
            { rating: 4, enjoyment: "The food festival had amazing variety", improvement: "More water stations needed", likelihood: "likely", sentiment: "positive", date: "2023-11-13", user: "student6@thapar.edu", recommend: "yes" }
        ];

        let charts = {};

        // Page navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            
            // Update active nav link
            document.querySelectorAll('nav a').forEach(link => {
                link.classList.remove('active');
            });
            
            // Set the appropriate nav link as active
            if (pageId === 'home-page') {
                document.querySelector('nav a[onclick="showPage(\'home-page\')"]').classList.add('active');
            } else if (pageId === 'feedback-page') {
                document.querySelector('nav a[onclick="showPage(\'login-page\')"]').classList.add('active');
            } else if (pageId === 'dashboard-page') {
                document.querySelector('nav a[onclick="checkAccess(\'dashboard-page\')"]').classList.add('active');
            } else if (pageId === 'login-page') {
                document.querySelector('nav a[onclick="showPage(\'login-page\')"]').classList.add('active');
            }
        }

        // Check if user is logged in
        function isLoggedIn() {
            return localStorage.getItem('loggedIn') === 'true';
        }

        // Check access for dashboard
        function checkAccess(pageId) {
            if (!isLoggedIn()) {
                showPage('login-page');
                alert('Please log in with your Thapar ID to access this section.');
                return;
            }
            
            if (pageId === 'dashboard-page') {
                loadDashboard();
                showPage(pageId);
            }
        }

        // Login form handler
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('thapar-email').value;
            const password = document.getElementById('password').value;
            
            // Simple validation for Thapar email
            if (email.endsWith('@thapar.edu')) {
                localStorage.setItem('loggedIn', 'true');
                localStorage.setItem('userEmail', email);
                
                // Check if user has already submitted feedback
                const userEmail = localStorage.getItem('userEmail');
                const existingFeedback = feedbackData.find(f => f.user === userEmail);
                
                if (existingFeedback) {
                    alert('You have already submitted feedback for Saturnalia 2023. Thank you!');
                    showPage('home-page');
                } else {
                    showPage('feedback-page');
                }
            } else {
                alert('Please use a valid Thapar email address');
            }
        });

        // Feedback form handler
        document.getElementById('feedback-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!isLoggedIn()) {
                alert('Please log in first');
                showPage('login-page');
                return;
            }
            
            const rating = parseInt(document.querySelector('input[name="rating"]:checked').value);
            const enjoyment = document.getElementById('enjoyment').value;
            const improvement = document.getElementById('improvement').value;
            const likelihood = document.getElementById('likelihood').value;
            const recommend = document.querySelector('input[name="recommend"]:checked').value;
            const userEmail = localStorage.getItem('userEmail');
            
            // Get selected events
            const enjoyedEvents = [];
            document.querySelectorAll('input[name="enjoyed-events"]:checked').forEach(checkbox => {
                enjoyedEvents.push(checkbox.value);
            });
            
            // Get improvement areas
            const improvementAreas = [];
            document.querySelectorAll('input[name="improvement-areas"]:checked').forEach(checkbox => {
                improvementAreas.push(checkbox.value);
            });
            
            // Simple sentiment analysis based on rating and text
            let sentiment = "neutral";
            if (rating >= 4) {
                sentiment = "positive";
            } else if (rating <= 2) {
                sentiment = "negative";
            }
            
            // Add new feedback
            feedbackData.push({
                rating: rating,
                enjoyment: enjoyment,
                improvement: improvement,
                likelihood: likelihood,
                sentiment: sentiment,
                date: new Date().toISOString().split('T')[0],
                user: userEmail,
                recommend: recommend,
                enjoyedEvents: enjoyedEvents,
                improvementAreas: improvementAreas
            });
            
            alert('Thank you for your feedback! Your response has been recorded.');
            showPage('home-page');
            
            // Reset form
            document.getElementById('feedback-form').reset();
        });

        // Load dashboard data
        function loadDashboard() {
            if (!isLoggedIn()) {
                showPage('login-page');
                return;
            }
            
            // Calculate stats
            const totalResponses = feedbackData.length;
            const avgRating = (feedbackData.reduce((sum, item) => sum + item.rating, 0) / totalResponses).toFixed(1);
            const positiveSentiment = feedbackData.filter(item => item.sentiment === 'positive').length;
            const negativeSentiment = feedbackData.filter(item => item.sentiment === 'negative').length;
            const neutralSentiment = feedbackData.filter(item => item.sentiment === 'neutral').length;
            const recommendYes = feedbackData.filter(item => item.recommend === 'yes').length;
            
            // Update stats container
            const statsContainer = document.getElementById('stats-container');
            statsContainer.innerHTML = `
                <div class="stat-card">
                    <h3>Total Responses</h3>
                    <div class="stat-value">${totalResponses}</div>
                    <p>Feedback submissions</p>
                </div>
                <div class="stat-card accent">
                    <h3>Average Rating</h3>
                    <div class="stat-value">${avgRating}/5</div>
                    <p>Overall satisfaction</p>
                </div>
                <div class="stat-card success">
                    <h3>Positive Feedback</h3>
                    <div class="stat-value">${positiveSentiment}</div>
                    <p>Positive sentiment</p>
                </div>
                <div class="stat-card warning">
                    <h3>Recommendations</h3>
                    <div class="stat-value">${recommendYes}</div>
                    <p>Would recommend</p>
                </div>
            `;
            
            // Create charts
            createRatingChart();
            createSentimentChart();
            createLikelihoodChart();
            loadRecentFeedback();
        }

        // Create rating distribution chart
        function createRatingChart() {
            const ctx = document.getElementById('ratings-chart').getContext('2d');
            
            // Count ratings
            const ratingCounts = {1: 0, 2: 0, 3: 0, 4: 0, 5: 0};
            feedbackData.forEach(item => {
                ratingCounts[item.rating]++;
            });
            
            if (charts.ratings) {
                charts.ratings.destroy();
            }
            
            charts.ratings = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['1 (Poor)', '2', '3', '4', '5 (Excellent)'],
                    datasets: [{
                        label: 'Number of Responses',
                        data: [ratingCounts[1], ratingCounts[2], ratingCounts[3], ratingCounts[4], ratingCounts[5]],
                        backgroundColor: [
                            '#FF6B6B',
                            '#FFA500',
                            '#FFD93D',
                            '#6BCF7F',
                            '#4CAF50'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#CBD5E0'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#CBD5E0'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#CBD5E0'
                            }
                        }
                    }
                }
            });
        }

        // Create sentiment analysis chart
        function createSentimentChart() {
            const ctx = document.getElementById('sentiment-chart').getContext('2d');
            
            // Count sentiments
            const sentimentCounts = {
                positive: feedbackData.filter(item => item.sentiment === 'positive').length,
                negative: feedbackData.filter(item => item.sentiment === 'negative').length,
                neutral: feedbackData.filter(item => item.sentiment === 'neutral').length
            };
            
            if (charts.sentiment) {
                charts.sentiment.destroy();
            }
            
            charts.sentiment = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Positive', 'Negative', 'Neutral'],
                    datasets: [{
                        data: [sentimentCounts.positive, sentimentCounts.negative, sentimentCounts.neutral],
                        backgroundColor: [
                            '#4CAF50',
                            '#FF6B6B',
                            '#FFA500'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#CBD5E0',
                                padding: 20
                            }
                        }
                    }
                }
            });
        }

        // Create likelihood chart
        function createLikelihoodChart() {
            const ctx = document.getElementById('likelihood-chart').getContext('2d');
            
            // Count likelihoods
            const likelihoodCounts = {
                'very-likely': feedbackData.filter(item => item.likelihood === 'very-likely').length,
                'likely': feedbackData.filter(item => item.likelihood === 'likely').length,
                'neutral': feedbackData.filter(item => item.likelihood === 'neutral').length,
                'unlikely': feedbackData.filter(item => item.likelihood === 'unlikely').length,
                'very-unlikely': feedbackData.filter(item => item.likelihood === 'very-unlikely').length
            };
            
            if (charts.likelihood) {
                charts.likelihood.destroy();
            }
            
            charts.likelihood = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Very Likely', 'Likely', 'Neutral', 'Unlikely', 'Very Unlikely'],
                    datasets: [{
                        data: [
                            likelihoodCounts['very-likely'],
                            likelihoodCounts['likely'],
                            likelihoodCounts['neutral'],
                            likelihoodCounts['unlikely'],
                            likelihoodCounts['very-unlikely']
                        ],
                        backgroundColor: [
                            '#4CAF50',
                            '#8BC34A',
                            '#FFC107',
                            '#FF9800',
                            '#F44336'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#CBD5E0',
                                padding: 20
                            }
                        }
                    }
                }
            });
        }

        // Load recent feedback
        function loadRecentFeedback() {
            const container = document.getElementById('recent-feedback');
            
            if (feedbackData.length === 0) {
                container.innerHTML = '<div class="no-data">No feedback submitted yet</div>';
                return;
            }
            
            // Sort by date (newest first) and take latest 5
            const sortedFeedback = [...feedbackData].sort((a, b) => new Date(b.date) - new Date(a.date)).slice(0, 5);
            
            container.innerHTML = '';
            sortedFeedback.forEach(feedback => {
                const sentimentClass = `sentiment-${feedback.sentiment}`;
                
                const feedbackItem = document.createElement('div');
                feedbackItem.className = 'feedback-item';
                feedbackItem.innerHTML = `
                    <div class="feedback-header">
                        <strong>${feedback.user}</strong>
                        <span class="feedback-rating">${feedback.rating}/5 ★</span>
                    </div>
                    <p><span class="${sentimentClass}">${feedback.sentiment.toUpperCase()}</span> • ${feedback.date}</p>
                    <p><strong>Enjoyed:</strong> ${feedback.enjoyment}</p>
                    <p><strong>Improvement:</strong> ${feedback.improvement}</p>
                    <p><strong>Recommend:</strong> ${feedback.recommend === 'yes' ? 'Yes' : feedback.recommend === 'no' ? 'No' : 'Maybe'}</p>
                `;
                container.appendChild(feedbackItem);
            });
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is already logged in
            if (isLoggedIn()) {
                showPage('home-page');
            } else {
                showPage('home-page');
            }
        });
    </script>
</body>
</html>